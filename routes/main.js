const express = require("express");
const router = express.Router();
const { User, validation } = require("../models/user");

router.post("/userName", async (req, res) => {
  const result = validation(req, res);
  if (result.error) {
    res.send("bad input for login");
    return;
  }

  const user = await User.findOne({ userName: req.body.userName });
  if (user) {
    res.send("existing user found");
    return;
  }

  const new_user = new User({
    userName: req.body.userName,
    canvas: [
      [
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#FF9800",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#FF9800",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#FF9800",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
        [
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
          "#61daf9",
        ],
      ],
    ],
  });
  await new_user.save();
  res.send("fresh account added");
});

router.post("/userData", async (req, res) => {
  const user = await User.findOne({ userName: req.body.userName });
  if (user) {
    res.send(user);
    return;
  }
});

router.put("/canvasSave", async (req, res) => {
  const user = await User.findOne({ userName: req.body.userName });

  user.canvas.push(req.body.sentCanvas);
  user.save();
  res.send("done");
});

module.exports = router;
